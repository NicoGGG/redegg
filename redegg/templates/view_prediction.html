{% extends "base.html" %}

{% block content %}
{% load static %}

<h1 class="mb-4 text-2xl font-bold">{{ contest_name }}</h1>
<h2 class="mb-6 italic">{{ contest_date }}</h2>
<h3 class="mb-4 text-xl font-bold">Your Prediction points: {{ prediction.score }}</h3>
<!-- Display the fights and the user's predictions without allowing any input -->
{% for fight, prognostic in fight_prognostic_pairs %}
    <div>
        <h3 class="text-xl m-4 font-bold">{{ fight.fight_info }}
            {% if fight.belt %}
            <img
                src="{% static 'images/belt.jpg' %}"
                alt="Belt"
                class="inline-block h-16 w-auto"
            />
            {% endif %}
        </h3>
        <div class="fight-container overflow-auto" id="fight-{{ fight.id }}" data-fight-position="{{ fight.position }}"> <!-- Add this container -->
            <div class="flex items-center justify-between h-24 my-4 fight-result" data-fight-position="{{ form.fight_card_position }}">
                <!-- Display details for each fighter -->
                <div class="h-auto w-full selectable fighter rounded-md px-4 m-4 flex flex-col items-center justify-center {% if fight.wl_fighter_one == 'W' %}bg-primary {% endif %}">
                    <img class="h-16 rounded-full mx-auto" src="{{ fight.fighter_one.photo_url }}" alt="{{ fight.fighter_one.name }}" style="pointer-events: none;">
                    <p>{{ fight.fighter_one }}</p>
                    <p class="italic">{{ fight.fighter_one.record }}</p>
                </div>
                <!-- Draw Checkbox -->
                <div class="h-full w-full selectable draw-option rounded-md px-4 m-4 flex items-center justify-center {% if fight.fight_result == 'DRAW' %}bg-primary {% endif %}">
                    <p>DRAW / NO CONTEST</p>
                </div>
                <div class="h-auto w-full selectable fighter rounded-md px-4 m-4 flex flex-col items-center justify-center {% if fight.wl_fighter_two == 'W' %}bg-primary {% endif %}">
                    <img class="h-16 rounded-full mx-auto" src="{{ fight.fighter_two.photo_url }}" alt="{{ form.fighter_two.name }}" style="pointer-events: none;">
                    <p>{{ fight.fighter_two }}</p>
                    <p class="italic">{{ fight.fighter_two.record }}</p>
                </div>
                {% if prognostic.fight_result == fight.fight_result %}
                    <i class="fas fa-check text-green-500"></i>  <!-- Green check mark -->
                {% elif prognostic.fight_result or prognostic.is_draw %}
                    <i class="fas fa-times text-red-500"></i>  <!-- Red cross -->
                {% endif %}
            </div>
            <div class="join my-2 method-selector flex justify-around">
                <p class="{% if fight.method_code == prognostic.method %}text-primary{% endif %}">
                    {{ fight.get_method_display }}
                </p>
                {% if prognostic.method and prognostic.method != fight.method_code %}
                    <p class="text-secondary line-through">
                        {{ prognostic.get_method_display }}
                    </p>
                {% endif %}
            </div>
        
            <div class="join my-2 bonus-selector flex justify-around">
                {% if fight.bonus %}
                <p class="{% if fight.bonus == prognostic.bonus %}text-primary{% endif %}">
                    {{ fight.get_bonus_display }}
                </p>
                {% endif %}
                {% if prognostic.bonus and prognostic.bonus != fight.bonus %}
                    <p class="text-secondary line-through">
                        {{ prognostic.get_bonus_display }}
                    </p>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="divider"></div>
{% endfor %}
{% endblock %}
